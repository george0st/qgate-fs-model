{
  "name": "pipeline",
  "description": "Setting for test pipelines for ingestion",
  "kind": "test",
  "spec": {
        "featuresets": ["basic-party", "basic-contact",
          "basic-relation", "basic-account",
          "basic-transaction", "basic-event",
          "basic-communication"],
        "tests": {
          "basic-party": {
            "Imputer": {"party-gender": "F", "party-nchild": 0 },
            "OneHotEncoder": {"party-gender": ["F", "M"]},
            "DateExtractor": {"parts": ["day_of_week","weekofyear"], "timestamp_col": "party-establishment"},
            "MapValues": {"party-familystatus": {"Married": "M", "Single": "S", "Divorced": "D"}},
            "storey.Filter": "(event['party-nchild'] > 0)",
            "storey.Extend": "({'bparty': 'party'})",
            "calc": "",
            "aggregation": ""
          },
          "basic-contact": {
            "Imputer": {"contact-state": "InActive"},
            "OneHotEncoder": {"contact-state": ["Active","InActive"]},
            "DateExtractor": {"parts": ["day_of_week"], "timestamp_col": "record-date"},
            "MapValues": {},
            "storey.Filter": "(event['contact-email'] != '')",
            "storey.Extend": "({'bcontact': 'contact'})",
            "calc": "",
            "aggregation": ""
          },
          "basic-relation": {
            "Imputer": {"relation-type": "Job"},
            "OneHotEncoder": {"relation-type": ["Family","Job","Social"]},
            "DateExtractor": {"parts": ["day_of_week"], "timestamp_col": "record-date"},
            "MapValues": {},
            "storey.Extend": "({'brelation': 'relation'})",
            "calc": "",
            "aggregation": ""
          },
          "basic-account": {
            "Imputer": {"account-state":  "Closed"},
            "OneHotEncoder": {"account-type": ["Current account", "Saving account"]},
            "DateExtractor": {"parts": ["quarter"], "timestamp_col": "record-date"},
            "MapValues": {},
            "storey.Filter": "(event['account-state'] == 'Active')",
            "storey.Extend": "({'baccount': 'account'})",
            "calc": "",
            "aggregation": ""
          },
          "basic-transaction":
          {
            "Imputer": {"transaction-type": "Instant"},
            "OneHotEncoder": {"transaction-type": ["Standard", "Instant"]},
            "DateExtractor": {"parts": ["quarter"], "timestamp_col": "record-date"},
            "MapValues": {},
            "storey.Filter": "(event['transaction-direction'] == 'Incoming')",
            "storey.Extend": "({'btransaction': 'transaction'})",
            "calc": "",
            "aggregation": ""
          },
          "basic-event":
          {
            "DateExtractor": {"parts": ["quarter", "dayofyear"], "timestamp_col": "record-date"},
            "MapValues": {},
            "storey.Filter": "(event['event-group'] == 'access' and event['event-action'] == 'login')",
            "storey.Extend": "({'bevent': 'event'})",
            "calc": "",
            "aggregation": ""
          },
          "basic-communication":
          {
            "Imputer": {"content-type": "Text", "content-sentiment": "Neutral"},
            "OneHotEncoder": {"content-sentiment": ["Positive", "Negative", "Neutral", "Fake"]},
            "DateExtractor": {"parts": ["is_month_end", "dayofyear"], "timestamp_col": "record-date"},
            "MapValues": {},
            "storey.Filter": "(event['content-type'] == 'Text' or event['channel'] == 'xxx')",
            "storey.Extend": "({'bcommunication': 'communication'})",
            "calc": "",
            "aggregation": ""
          }
        }
  }
}